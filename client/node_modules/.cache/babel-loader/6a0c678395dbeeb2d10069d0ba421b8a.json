{"ast":null,"code":"import _asyncToGenerator from\"/Users/ruchikaashokbharati/Documents/SocialMediaProject-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ruchikaashokbharati/Documents/SocialMediaProject-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/ruchikaashokbharati/Documents/SocialMediaProject-main/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import{Link}from\"react-router-dom\";import LikeButton from'../../LikeButton';import{useSelector,useDispatch}from\"react-redux\";import{likePost,savePost,unLikePost,unSavePost}from\"../../../redux/actions/postAction\";import ShareModal from'../../ShareModal';// import { BASE_URL } from '../../../utils/config';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CardFooter=function CardFooter(_ref){var post=_ref.post;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLike=_useState2[0],setIsLike=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),saved=_useState4[0],setSaved=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loadLike=_useState6[0],setLoadLike=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),saveLoad=_useState8[0],setSaveLoad=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isShare=_useState10[0],setIsShare=_useState10[1];var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,theme=_useSelector.theme,socket=_useSelector.socket;useEffect(function(){if(post.likes.find(function(like){return like._id===auth.user._id;})){setIsLike(true);}else{setIsLike(false);}},[post.likes,auth.user._id]);var handleLike=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!loadLike){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoadLike(true);_context.next=5;return dispatch(likePost({post:post,auth:auth,socket:socket}));case 5:setLoadLike(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleLike(){return _ref2.apply(this,arguments);};}();var handleUnLike=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!loadLike){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setLoadLike(true);_context2.next=5;return dispatch(unLikePost({post:post,auth:auth,socket:socket}));case 5:setLoadLike(false);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handleUnLike(){return _ref3.apply(this,arguments);};}();var handleSavePost=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!saveLoad){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:setSaveLoad(true);_context3.next=5;return dispatch(savePost({post:post,auth:auth}));case 5:setSaveLoad(false);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function handleSavePost(){return _ref4.apply(this,arguments);};}();var handleUnSavePost=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!saveLoad){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:setSaveLoad(true);_context4.next=5;return dispatch(unSavePost({post:post,auth:auth}));case 5:setSaveLoad(false);case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function handleUnSavePost(){return _ref5.apply(this,arguments);};}();useEffect(function(){if(auth.user.saved.find(function(id){return id===post._id;})){setSaved(true);}else{setSaved(false);}},[post._id,auth.user.saved]);return/*#__PURE__*/_jsxs(\"div\",{className:\"card_footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card_icon_menu\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(LikeButton,{isLike:isLike,handleLike:handleLike,handleUnLike:handleUnLike}),/*#__PURE__*/_jsx(Link,{to:\"/post/\".concat(post._id),className:\"text-dark\",children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-comments\"})}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-share\",alt:\"Send\",onClick:function onClick(){return setIsShare(!isShare);}})]}),saved?/*#__PURE__*/_jsx(\"i\",{className:\"fas text-info fa-bookmark\",onClick:handleUnSavePost}):/*#__PURE__*/_jsx(\"i\",{className:\"far fa-bookmark\",onClick:handleSavePost})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-start\",children:[/*#__PURE__*/_jsxs(\"h6\",{style:{padding:\"0 25px\",cursor:\"pointer\"},children:[post.likes.length,\" likes\"]}),/*#__PURE__*/_jsxs(\"h6\",{style:{padding:\"0 25px\",cursor:\"pointer\"},children:[post.comments.length,\" comments\"]})]}),isShare&&/*#__PURE__*/_jsx(ShareModal// url={`${BASE_URL}/post/${post._id}`}\n,{url:\"http://google.com\",theme:theme,setIsShare:setIsShare})]});};export default CardFooter;","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/SocialMediaProject-main/client/src/components/home/post_card/CardFooter.js"],"names":["React","useState","useEffect","Link","LikeButton","useSelector","useDispatch","likePost","savePost","unLikePost","unSavePost","ShareModal","CardFooter","post","isLike","setIsLike","saved","setSaved","loadLike","setLoadLike","saveLoad","setSaveLoad","isShare","setIsShare","dispatch","state","auth","theme","socket","likes","find","like","_id","user","handleLike","handleUnLike","handleSavePost","handleUnSavePost","id","padding","cursor","length","comments"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link } from \"react-router-dom\";\nimport LikeButton from '../../LikeButton';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { likePost, savePost, unLikePost, unSavePost } from \"../../../redux/actions/postAction\";\nimport ShareModal from '../../ShareModal';\n// import { BASE_URL } from '../../../utils/config';\n\n\nconst CardFooter = ({post}) => {\n  const [isLike, setIsLike] = useState(false);\n  const [saved, setSaved] = useState(false);\n  const [loadLike, setLoadLike] = useState(false);\n  const [saveLoad, setSaveLoad] = useState(false);\n  const [isShare, setIsShare] = useState(false);\n\n  const dispatch = useDispatch();\n  const { auth, theme, socket } = useSelector((state) => state);\n\n  useEffect(() => {\n    if (post.likes.find((like) => like._id === auth.user._id)) {\n      setIsLike(true);\n    }else{\n      setIsLike(false);\n    }\n  }, [post.likes, auth.user._id]);\n\n  const handleLike = async () => {\n    if(loadLike) return;\n    setLoadLike(true);\n    await dispatch(likePost({post, auth, socket}) );\n    setLoadLike(false);\n  };\n\n  const handleUnLike = async () => {\n    if(loadLike) return;\n    setLoadLike(true);\n    await dispatch(unLikePost({post, auth, socket}) );\n    setLoadLike(false);\n  };\n\n    const handleSavePost = async () => {\n      if (saveLoad) return;\n      setSaveLoad(true);\n      await dispatch(savePost({ post, auth }));\n      setSaveLoad(false);\n    };\n\n    const handleUnSavePost = async () => {\n      if (saveLoad) return;\n      setSaveLoad(true);\n      await dispatch(unSavePost({ post, auth }));\n      setSaveLoad(false);\n    };\n\n    useEffect(() => {\n      if (auth.user.saved.find(id => id === post._id)) {\n        setSaved(true);\n      } else {\n        setSaved(false);\n      }\n    }, [post._id, auth.user.saved]);\n\n    return (\n      <div className=\"card_footer\">\n        <div className=\"card_icon_menu\">\n          <div className=\"d-flex\">\n            <LikeButton\n              isLike={isLike}\n              handleLike={handleLike}\n              handleUnLike={handleUnLike}\n            />\n            <Link to={`/post/${post._id}`} className=\"text-dark\">\n              <i className=\"far fa-comments\" />\n            </Link>\n            <i\n              className=\"fa fa-share\"\n              alt=\"Send\"\n              onClick={() => setIsShare(!isShare)}\n            />\n          </div>\n          {saved ? (\n            <i\n              className=\"fas text-info fa-bookmark\"\n              onClick={handleUnSavePost}\n            />\n          ) : (\n            <i\n              className=\"far fa-bookmark\"\n              onClick={handleSavePost}\n            />\n          )}\n        </div>\n        <div className=\"d-flex justify-content-start\">\n          <h6 style={{ padding: \"0 25px\", cursor: \"pointer\" }}>\n            {post.likes.length} likes\n          </h6>\n          <h6 style={{ padding: \"0 25px\", cursor: \"pointer\" }}>\n            {post.comments.length} comments\n          </h6>\n        </div>\n\n        {isShare && (\n          <ShareModal\n            // url={`${BASE_URL}/post/${post._id}`}\n            url=\"http://google.com\"\n            theme={theme}\n            setIsShare={setIsShare}\n          />\n        )}\n      </div>\n    );\n}\n\nexport default CardFooter\n"]},"metadata":{},"sourceType":"module"}